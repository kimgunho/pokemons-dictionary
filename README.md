# 포켓몬 도감 - functionaly Component
<P>React를 이용하여 포켓몬 도감을 만들어보자</p>


## issue
- [X] 포켓몬 api를 이용하여 데이터 재정리
- [X] 포켓몬 리스트 선택시 디테일 렌더링
- [X] 좋아하는 포켓몬 찜기능
- [X] 검색기능

<hr>

## 단계별 구성 리스트
1. 컴포넌트 구성
2. 포켓몬 데이터의 리스트화
3. 선택된 포켓몬데이터 디테일 전달
4. 찜하기 기능과 선택받은 포켓몬리스트 리렌더링
5. 검색기능

<hr>

### 1. 컴포넌트 구성
**기획** : 크게 포켓몬의 리스트를 보여주는 리스트페이지와 선택된 포켓몬의 디테일정보를 확인할수 있는 디테일페이지로 구분합니다. 리스트페이지의 세부 컴포넌트는 검색컴포넌트, 좋아요기능 컴포넌트, 포켓몬리스트 컴포넌트로 구성되었습니다.<br>
<hr>

### 2. 포켓몬 데이터의 리스트화
**기획** : 포켓몬 api의 url을 fetch를 하는과정에서 json구조가 한번의 json에 모든 데이터가 들어있지 않다보니 모든 데이터를 이끌어 내기위해 도합 3번의 fetch를 해야했다.
이부분은 마음에 들지않지만 개선의 여지가 어려워보입니다.<br>
받아온 데이터를 context의 전역 state로 만든후 pokemons 리스트에 렌더링 걸어주었습니다. 
데이터를 next, prev방법보다는 infinity scroll을 이용하여 추가적으로 리스트를 불러오도록 하였으며, 초기 데이터를 불러올시에는 skeleton ui 방안으로 대처하였습니다.
<img src="./Kapture.gif"  width="320">
<br>
**문제점&방안** : fetch된 코드만 따로 파일로 만들어서 사용을 하고싶었으나 hook err로 잘 되지를 않았다. 이부분은 다시 손을 볼 예정이다. <br>
<hr>

### 3. 선택된 포켓몬데이터 디테일 전달
**기획** : 선택된 포켓몬의 정보를 context의 selectPokemon state에 넘겨주어 해당 데이터를 바로 디테일 페이지에 렌더링 하였습니다.
<br>
<img src="./detail.gif"  width="320">
<hr>

### 4. 찜하기 기능과 선택받은 포켓몬리스트 리렌더링
**기획** : 디테일의 ❤️ 버튼을 클릭하면 context의 콜렉트 배열로 따로 넘어가도록 하였습니다. 또한 만약 그 배열안에 중복된 포켓몬이 있을시 포함되지않으며 콜렉트 배열에서 제외할수 있는 필터링을 통하여 💔싫어요 버튼을 구현하였습니다. 추가, 제거된 배열은 나의 포켓몬 버튼으로 확인이 가능하며 초기화를 통하여 다시금 기본 fetch 포켓몬 정보를 불러올수 있습니다.<br>
**문제점&방안** : 해당 기능과는 다른 문제점이지만 리스트의 포켓몬을 클릭할 시 디테일에 rotateY animation 효과를 주었으나 빠르게 여러 리스트를 클릭했을 시 효과가 매끄럽지 못한거같다. 
이부분은 다시금 정리할 예정이다.<br>
<img src="./like.gif"  width="640">
<hr>

### 5. 검색기능
**기획** : 검색된 포켓몬의 정보를 보여주기위하여 검색된 이름의 값과 리스트의 배열에서 동일한 값이 있다면 해당 데이터를 불러오도록 구현하였습니다. <br>
**문제점&방안** : 검색된 포켓몬을 보여주기 위한 과정에서 미처 생각치못한 문제점이 발생하였는데 lazy loading을 하는 과정에서 아직 불러오지 못한 데이터를 검색하는 부분에 대한
이슈가 생각들었습니다. 이를 해결하기 위한 방법으로는 2가지로 생각이 듭니다.
1. 데이터를 모두 불러온다음 검색이 가능하게한다. <- lazy loading의 사용성을 잃어버림
2. 검색된 포켓몬만을 다시 re fetch하여 데이터를 불러온다 

**고로 2번 방안을 구현하기위해 실행해보기로 했으나 새로운 문제점이 발생**

현재 포켓몬의 이름은 default값이 영어이다.
검색을 하여 re fetch를 하려면 영어로 검색을 하여하는데
이를 해결하기 위한 방법으로는 모든 포켓몬을 불러온 후 이를 

```js
{
    ko : 이상해씨
    en : bulbasaur
}
... ing

const enName = ko=> en으로 전환
fetch(`...${enName}`)
```

위와 같은 방식으로 한글이름을 검색해도 en의 네임값을 자동으로 전환한 후 전환된 값으로 정보를 읽을수 있도록 하여야한다.
하지만 위 방법도 결국은 1번과 같은 방식으로 생각이 들어 조금더 고민을 해볼 필요성을 느꼈다.
- 추후 진행 예정
<br>
<img src="./search.gif"  width="640">

## 회고록
보기에는 간단해 보이지만 여러 hook와 클라이언트와 서비스의 대한 관계성, 컴포넌트들간의 로직을 생각하며 <br>
보다 좋은 코드?와 효율적인 구조를 위하여 논리적인 생각을 하는것에 울림이 크게 온 것같다.<br>
또한 최적화에 신경을 쓰다보니<br>
어째서 event scroll을 사용하기보단 observer를 사용하여야하는지, <br>
skeleton ui를 쓰는것과 loading 구조를 사용하는것이 최적일지<br>
매 서비스의 환경마다 의미가 다른부분에서 초기 기획이 중요하다는 것을 느낀다.<br><br>

또한 기술적인 호기심과 욕심이 더욱 커진 기여가 되었다.<br>
이번 작은 토이프로젝트로 인하여<br>
앞으로 <br>
- 정규표현식을 이용한 실시간 검색
- 이미지에서 컬러값을 추출하는 기능
- axios

등이 생겼다. 위 기능들을 알아본 후 새로운 프로젝트를 진행할 예정이다.


**프로젝트를 통하여 배운부분** : skeleton ui, lazy loading, styled components, context<br>


